from django.db import models
from django.contrib.auth.models import User
from news.models import Author
from news.models import Category
from news.models import Post
from news.models import PostCategory
from news.models import Comment
from django.db.models import Max

1. 
user_1 = User.objects.create_user(username='Dan Abnett',  password='123')
user_2 = User.objects.create_user(username='Graham McNeill', password='123')

2.
author_1 = Author.objects.create(user=user_1)
author_2 = Author.objects.create(user=user_2)

3.
cat_it = Category.objects.create(name='it')
cat_sci = Category.objects.create(name='science')
cat_gms = Category.objects.create(name='games')
cat_spt = Category.objects.create(name='sport')

4.
post_neuroimp = Post.objects.create(
    author=author_1,
    post_type=Post.article,
    header='Интервью с первым бегуном, использующим нейроимпланты',
    content='https://youtube.com/?v=lorem-ipsum',
)

post_vrh = Post.objects.create(
    author=author_2,
    post_type=Post.article,
    header='Facebook продемонстрировали новый VR-шлем',
    content='https://youtube.com/?v=lorem-ipsum',
)

post_django = Post.objects.create(
    author=author_1,
    post_type=Post.news,
    header='Британские учёные научились использовать Django',
    content='plain text',
)

5.
PostCategory.objects.create(post=post_neuroimp, category=cat_sci)
PostCategory.objects.create(post=post_neuroimp, category=cat_spt)
PostCategory.objects.create(post=post_vrh, category=cat_gms)
PostCategory.objects.create(post=post_vrh, category=cat_it)
PostCategory.objects.create(post=post_django, category=cat_it)

6.
comm_1 = Comment.objects.create(
    post=post_neuroimp,
    user=user_2,
    content='съешь мягких булочек',
)

comm_2 = Comment.objects.create(
    post=post_neuroimp,
    user=user_2,
    content='съешь ещё мягких булочек',
)

comm_3 = Comment.objects.create(
    post=post_vrh,
    user=user_1,
    content='регаться на fb ради шлемов не стоит того',
)

comm_4 = Comment.objects.create(
    post=post_django,
    user=user_2,
    content='молодцы',
)

7.
post_neuroimp.like()
post_django.dislike()
comm_1.like()
comm_1.like()

8.
author_1.update_rating()
author_2.update_rating()

9.
q1 = Author.objects.order_by('id')[0]
r1 = str(q1.user.username)
r2 = str(q1.rating)
r3 = f'{r1} - {r2}'

10.
